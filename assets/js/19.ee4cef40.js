(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{327:function(t,s,n){"use strict";n.r(s);var a=n(5),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"缘起"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缘起"}},[t._v("#")]),t._v(" 缘起")]),t._v(" "),s("p",[t._v("最近重新搭建了一次 Wordpress，从一台干净的主机开始，搭建符合自己需求的、便于运营的博客，还是有不少东西需要了解的，现在梳理一下知识点。")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://oww4nskgw.bkt.clouddn.com/20170930.request_model.jpg!aw",alt:"一个网络请求的过程"}})]),t._v(" "),s("h2",{attrs:{id:"网络名词概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网络名词概念"}},[t._v("#")]),t._v(" 网络名词概念")]),t._v(" "),s("p",[t._v("有必要弄懂一些名词的概念：IP、DNS、Domain、HTTP、PORT……")]),t._v(" "),s("h2",{attrs:{id:"服务器主机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器主机"}},[t._v("#")]),t._v(" 服务器主机")]),t._v(" "),s("p",[t._v("搭建一个博客网站并不一定需要一台"),s("em",[t._v("主机")]),t._v("，也许只需要一个"),s("em",[t._v("空间")]),t._v("就行。空间是主机划分出来的，一台主机可以划分若干空间，一些空间服务商会把空间分租给不同的客户。空间比主机便宜，主机比空间自由。")]),t._v(" "),s("p",[t._v("如果是搭建一个静态博客网站，其实用 "),s("a",{attrs:{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Pages"),s("OutboundLink")],1),t._v(" 就很简便，完全免费，搭配 Hexo 可以很快搭建出来：创建一个 GitHub 仓库，本地安装 Hexo，部署到 GitHub 仓库，然后把域名指向到这个仓库就完事，这是一个 "),s("a",{attrs:{href:"blog.eazyc.info"}},[t._v("(Hexo 演示页面)")]),t._v("。这种博客的特点是：完全静态（没有评论），需要一台安装了 Hexo 或其他静态博客部署工具的电脑才能发布文章，用 Markdown 写作，主题靓丽，不需要 HTTP 服务器。")]),t._v(" "),s("p",[t._v("回到正题，以 Wordpress 为例，下面开始介绍搭建"),s("em",[t._v("基于服务器主机的动态博客网站")]),t._v("所需的服务器知识。")]),t._v(" "),s("h3",{attrs:{id:"操作系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#操作系统"}},[t._v("#")]),t._v(" 操作系统")]),t._v(" "),s("p",[t._v("用到主机，就需要和操作系统打交道。我选用的操作系统是 CentOS —— 一种 Linux 的发布版本，本文也是基于它来写的。为什么选它呢？原因以下：")]),t._v(" "),s("ol",[s("li",[t._v("Linux 是开源的，想用就可以用，这几乎是服务器系统的默认选项；")]),t._v(" "),s("li",[t._v("关于 Linux 我是通过这本书入门的："),s("a",{attrs:{href:"http://linux.vbird.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("鳥哥的 Linux 私房菜"),s("OutboundLink")],1),t._v("，而里面均以 CentOS 为案例，网站的中文简体地址在"),s("a",{attrs:{href:"http://cn.linux.vbird.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v("。")])]),t._v(" "),s("h3",{attrs:{id:"命令行操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令行操作"}},[t._v("#")]),t._v(" 命令行操作")]),t._v(" "),s("p",[t._v("SSH 是 Secure Shell 的缩写，也就是安全外壳协议，可以通过它来登录到远程的主机进行命令行操作。")]),t._v(" "),s("p",[t._v("常用的命令或工具：ls、cd、pwd、cp、mv、rm、chmod、chown、yum、wget、vim")]),t._v(" "),s("h3",{attrs:{id:"http-服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http-服务器"}},[t._v("#")]),t._v(" HTTP 服务器")]),t._v(" "),s("p",[t._v("选用开源的就好，我使用的是__Nginx__，也可以选用__Apache__。")]),t._v(" "),s("p",[t._v("安装时注意对应操作系统和 HTTP 服务器版本号。")]),t._v(" "),s("h3",{attrs:{id:"数据库和应用程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据库和应用程序"}},[t._v("#")]),t._v(" 数据库和应用程序")]),t._v(" "),s("p",[s("strong",[t._v("MySQL")])]),t._v(" "),s("p",[t._v("一款普遍使用的开源数据库，Wordpress 依赖它来运行。\n命令行")]),t._v(" "),s("p",[s("strong",[t._v("PHP")])]),t._v(" "),s("p",[t._v("Wordpress 使用 PHP 开发。")]),t._v(" "),s("p",[s("strong",[t._v("phpMyAdmin")])]),t._v(" "),s("p",[t._v("一款通过 PHP 实现的、在浏览器端管理 MySQL 数据库的 GUI 工具，极为方便。")]),t._v(" "),s("p",[s("strong",[t._v("Wordpress")])]),t._v(" "),s("p",[t._v("通过 wget、unzip 安装 Wordpress 在 HTTP 服务器的网站目录，完成配置。")]),t._v(" "),s("h3",{attrs:{id:"ftp-服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ftp-服务器"}},[t._v("#")]),t._v(" FTP 服务器")]),t._v(" "),s("p",[t._v("没什么好说的，虽然老旧，但简单、实用、且跨平台，通过 FTP 服务器可以在 windows、macos、linux 上迅速修改网站。")]),t._v(" "),s("h3",{attrs:{id:"版本管理服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#版本管理服务器"}},[t._v("#")]),t._v(" 版本管理服务器")]),t._v(" "),s("p",[t._v("Git 是一种版本管理工具，可以在网站上搭建一个服务器，方便修改网站开发。摒除 Git 的话，SVN 也有很多人在使用，但效率和体验都没 Git 好，新项目推荐使用 Git。")]),t._v(" "),s("p",[t._v("搭建博客并不一定需要版本管理器，FTP 就够用，但团队合作都需要涉及版本管理，有时间学习一下怎么搭建也无妨。")]),t._v(" "),s("h3",{attrs:{id:"防火墙"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#防火墙"}},[t._v("#")]),t._v(" 防火墙")]),t._v(" "),s("p",[t._v("CentOS 6 自带 iptables，CentOS 7 自带 firewalld。防火墙关了很危险，记得要开着哦！")]),t._v(" "),s("h2",{attrs:{id:"域名解析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#域名解析"}},[t._v("#")]),t._v(" 域名解析")]),t._v(" "),s("p",[t._v("购买域名之后，需要把域名解析到主机以支持通过域名访问博客网站。在设置域名解析时，如果完全没做过，一开始会比较懵逼，不知道各种缩写和符号是什么意思。")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://oww4nskgw.bkt.clouddn.com/20170930.domain-name-resolution.jpg!aw",alt:"域名解析"}})]),t._v(" "),s("p",[t._v("上图是域名 eazyc.info 解析设置的其中三条，其中：")]),t._v(" "),s("ul",[s("li",[t._v("第一条，类型 "),s("strong",[t._v("“A”")]),t._v(" 表示使用“A 记录”解析，名称 "),s("strong",[t._v("“@”")]),t._v(" 代表“顶级域名”，这里指 “eazyc.info”，值 “45.77...” 是指向的 IP 地址，TTL 表示 DNS 缓存时间。")]),t._v(" "),s("li",[t._v("第二条，类型 "),s("strong",[t._v("“CNAME”")]),t._v(" 表示使用 “别名” 解析，即子域名。名称 "),s("strong",[t._v("“blog”")]),t._v(" 代表 “blog.eazyc.info”，值 “eazyctee.github.io” 是指向的域名。需要注意的是，这类型的解析只能解析到已有的域名。")]),t._v(" "),s("li",[t._v("第三条，意思是 “www.eazyc.info” 指向 “@”，也就是 “eazyc.info”")])]),t._v(" "),s("p",[t._v("另外需要一提的还有 "),s("strong",[t._v("“NS”")]),t._v(" 这个类型，可以通过设置它来选择 DNS 解析服务器，我使用的是域名服务商的 DNS，所以 "),s("strong",[t._v("NS")]),t._v(" 一项默认，这里没有列出。")]),t._v(" "),s("h2",{attrs:{id:"网站优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网站优化"}},[t._v("#")]),t._v(" 网站优化")]),t._v(" "),s("p",[s("strong",[t._v("gzip")])]),t._v(" "),s("p",[t._v("一种普遍被浏览器接受的压缩方式，可以加快页面载入速度，建议通过 HTTP 服务器开启，具体设置搜索相关资料。")]),t._v(" "),s("p",[s("strong",[t._v("主题和兼容")])]),t._v(" "),s("p",[t._v("我希望自己的博客可以在 IE7+ 的的浏览器正常展示，并且支持移动端，这就需要一些前端的知识。\n当然， Wordpress 可以帮忙做到，但兼容性好的免费主题似乎很少。最后我用了默认主题，在这之上做了一些简化和修改。")]),t._v(" "),s("p",[s("strong",[t._v("页面头部简化")])]),t._v(" "),s("p",[t._v("Wordpress 默认页面头部会加载很多不必要的信息，可以在 [themename]/functions.php 里去掉一些不需要的加载项，以 Wordpress 4.8.2 为例：")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_oembed_add_discovery_links'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_oembed_add_host_js'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'rest_output_link_wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'feed_links_extra'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'rsd_link'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wlwmanifest_link'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_resource_hints'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_print_styles'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'print_emoji_styles'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'print_emoji_detection_script'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'index_rel_link'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'parent_post_rel_link'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'start_post_rel_link'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'adjacent_posts_rel_link_wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'publish_future_post'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'check_and_publish_future_post'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_generator'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'adjacent_posts_rel_link_wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("strong",[t._v("调整脚本加载顺序")])]),t._v(" "),s("p",[t._v("把脚本放到页面尾部加载，有助于提升交互体验。可以在 [themename]/functions.php 里去掉一些不需要的加载项，以 Wordpress 4.8.2 为例：")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 把脚本放到 footer 加载，注意要把支持低版本 IE 的样式表放回头部加载")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_head'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_print_head_scripts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add_action")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_footer'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'wp_print_head_scripts'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("strong",[t._v("SEO")])]),t._v(" "),s("p",[t._v("需要了解的关键词：robots.txt、sitemap.xml、url 结构化、meta 标签……")]),t._v(" "),s("p",[s("strong",[t._v("CDN")])]),t._v(" "),s("p",[t._v("一些公共资源改成 CDN 可以加快网站的加载速度，比如修改 Wordpress 自带的 jQuery，以 Wordpress 4.8.2 为例，可以在 [themename]/functions.php 里添加：")]),t._v(" "),s("div",{staticClass:"language-php extra-class"},[s("pre",{pre:!0,attrs:{class:"language-php"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wp_deregister_script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'jquery-core'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wp_register_script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'jquery-core'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'1.12.4'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("其他媒体，比如图片也建议修改成 CDN（见本文末）。")]),t._v(" "),s("p",[s("strong",[t._v("浏览统计和分析")])]),t._v(" "),s("p",[t._v("正在使用 Wordpress 的官方插件 Jetpack，统计分析的功能不多但够用，其他例如“分享到脸谱网”这样的功能不用可以关掉。")]),t._v(" "),s("h2",{attrs:{id:"图片服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片服务器"}},[t._v("#")]),t._v(" 图片服务器")]),t._v(" "),s("p",[t._v("Wordpress 自带媒体管理功能，很方便。但它的缺点也很明显：使用主机空间来保存、访问速度受限于主机环境、不方便迁移。所以，有的博主会用到图片服务器（或者说是图床，但其实可以存储各种文件，不限于图片）。有的图片服务器自带 CDN 加速，并且空间相对于主机来说要便宜。")]),t._v(" "),s("p",[t._v("我使用的是"),s("a",{attrs:{href:"https://www.qiniu.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("七牛云"),s("OutboundLink")],1),t._v("，目前免费用户有 10G 空间，流量也比较可观。Wordpress 有一个七牛镜像插件，顾名思义，就是在主机存储的基础上，再在七牛云服务器存储一份，访问图片是加载的是七牛云的图片（说了这么多，我并不是给 Qiniu 打广告，只是我刚好了解过这些内容而已啦:P），然而这还是需要主机空间，而且迁移也应该比较麻烦（但我并不了解里面的存储机制），还是单独储存在云上吧~")]),t._v(" "),s("p",[t._v("由于七牛云是面向开发者的，所以它的官方媒体管理界面功能很有限。于是我写了一个脚本用于上传本地文件，并自动从服务器获取图片列表，转换成 json，再写了一个页面读取 json，用于预览和搜索云端的图片。这是一个 "),s("a",{attrs:{href:"http://works.eazyc.info/static/image-preview/",target:"_blank",rel:"noopener noreferrer"}},[t._v("图片预览演示页面"),s("OutboundLink")],1),t._v(" （放在了 GitHub Pages 上，它的这个页面展示功能真的赞），选择图片后可以按空格或回车键预览。")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://oww4nskgw.bkt.clouddn.com/20170930.qiniu-image-preview.jpg!aw",alt:"图片预览演示页面"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);